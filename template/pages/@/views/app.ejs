<%
const contacts = _.cms('contacts') || {}
const settings = _.cms('settings') || {}
const footer = _.cms('footer') || {}

// store logo object
const logo = _.settings.logo
  ? { url: _.settings.logo, alt: _.settings.name }
  : _.store.logo
%>

<div class="app">
  <header class="app__header">
    <div class="container-fluid">
      <div class="row align-items-center">
        <div class="col-12 col-sm-auto mb-2 mb-sm-0">
          <a href="/">
            <% if (logo && logo.url) { %>
              <img class="app__logo" src="<%= logo.url %>" alt="<%= logo.alt %>">
            <% } else { %>
              <%= _.settings.name || _.store.name %>
            <% } %>
          </a>
        </div>

        <div class="col">
          <div class="app__contact">
            <span class="d-none d-md-inline">
              <%= _.dictionary().need_help %>? <%= _.dictionary().call_to %>
            </span>
            <% if (contacts.whatsapp) { %>
              <span><%= contacts.whatsapp %></span>
            <% } %>
            <% if (contacts.phone) { %>
              <span><%= contacts.phone %></span>
            <% } %>
          </div>

          <div class="app__safe">
            <span class="app__safe__icon">
              <i class="fas fa-shield-alt"></i>
            </span>
            <%= _.dictionary().safe_env %>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div id="spa">
    <div id="storefront-app"></div>
  </div>

  <footer class="app__footer">
    <div class="container-fluid">
      <ul class="app__stamps">
        <% footer.stamps.forEach(({ src, alt, link }) => { %>
          <% if (link) { %>
            <li>
              <a href="<%= link %>" target="_blank" rel="noopener">
                <img src="<%= src %>" alt="<%= alt %>">
              </a>
            </li>
            <% } else { %>
            <li>
              <img src="<%= src %>" alt="<%= alt %>">
            </li>
          <% } %>
        <% }) %>
      </ul>
    </div>
  </footer>

  <div class="app__credits container">
    <div>
      <% if (footer.credits) { %>
        <span><%= footer.credits %></span>
      <% } else { %>
        <span class="app__credits__name">Â© <%= settings.name %> </span>
        <span class="app__credits__address"> - <%= contacts.address %> - </span>
        <span class="app__credits__number"> <%= contacts.doc_number %></span>
      <% } %>
    </div>

    <div class="ecom-credits">
      <a href="https://e-com.plus" target="_blank" rel="noopener">
        Powered by
        <img src="https://ecom.nyc3.digitaloceanspaces.com/brand/plus/198x43.png" alt="E-Com Plus">
      </a>
    </div>
  </div>
</div>
